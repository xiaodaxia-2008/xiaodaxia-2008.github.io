---
title: FiberArt 导入外部计算的铺层
authors:
  - Shawn
date: 2025-06-26T18:53:56
categories:
  - FiberArt
---
FiberArt 包含路径规划、仿真、后处理三大块，一般来说 FiberArt 中的铺层路径都是由 FiberArt 软件的路径规划算法计算得到的，计算出来的铺层可以导出为 FiberArt 的专有二进制格式（后缀名为 .afscene 或者 .afnode）。如果用户使用第三方的算法算出了铺层的路径，想要导入到 FiberArt 中来，就需要一种新的中间格式，为了方便起见，在最新版 FiberArt（0.13.9）中，我们采用了 [JSON](https://www.json.org/json-en.html) 格式作为铺层导入导出的中间格式。

## 导出铺层

在 FiberArt 中，先在场景树中选中要导出的铺层（Ply）节点，然后点击 `文件》导出》导出铺层`，在弹出的文件对话框中选择要保存的文件路径及名称，文件名应该以 `.json` 的后缀结束。导出铺层之后，可以使用 NotePad、VSCode 之类的编辑器打开查看。

可以下载这个 [FiberArtData/JsonPly/AirWingPly45.json](https://github.com/xiaodaxia-2008/FiberArtData/blob/master/JsonPly/AirWingPly45.json) 完整的示例文件，该铺层是基于 [Surfaces/Wing.stp](https://github.com/xiaodaxia-2008/FiberArtData/blob/master/Surfaces/Wing.stp) 这个零件规划的 45° 铺层。

## 导入铺层

要导入外部计算的铺层，需要先转化为符合 FiberArt 铺层规范的 `json` 格式，FiberArt 要求导入的 json 必须符合下面的格式：

```json
{
	// 铺层的名称
	"name": "Ply45",
	// 铺层包含的预浸带组
	"courses": [
		{
			// 当前预浸带组的名称 
			"name": "Course1",
			// 铺丝头最大铺放的根数
			"max_tows": 8, 
			// 包含的预浸带
			"tows": [
				{
					// 这根预浸带的名称
					"name": "Tow1",
					// 预浸带宽度，单位是米
					"width": 0.0064,
					// 厚度，单位是米
					"thickness": 0.0001,
					// 预浸带段
					"segments": [
						// 第一段
						[0.0, 1.0],
						// 第二段
						[1.1, 2.0]
					],
					// 预浸带的左边界
					"left_boundary": [
						[
			              -8.881784197e-17,
			              0.3122729612489414,
			              0.09152230722364099
			            ],
			            [
			              0.006152924098051296,
			              0.3122711817300565,
			              0.09150596525719899
			            ],
			            // ... 更多的点
					],
					"center_path": [
			            [
			              -8.881784197e-17,
			              0.3090930284503795,
			              0.0918803973814629
			            ],
			            [
			              3.139053811173154e-08,
			              0.30909306438973166,
			              0.0918803932499613
			            ],			
			            // ... 更多的点			
					],
					"right_boundary": [
						[
			              -8.881784197e-17,
			              0.3059131203665747,
			              0.09223848475617213
			            ],
			            [
			              6.278107631228089e-08,
			              0.3059131628163211,
			              0.09223847980714471
			            ],
			             // ... 更多的点		
					]
				},
				// 更多预浸带
			]
		},
		// 更多预浸带组
	]
}
```


这里面的层级关系是一个铺层可以包含多个铺层组，一个铺层组由多跟预浸带组成（最大数量就是铺丝头一次可以铺放的预浸带根数）。每根预浸带的左边界曲线、中心曲线、右边界曲线决定了它的位置、形状。每条曲线由一些列三维空间的坐标点定义，用户需要提供这些离散的坐标点。

在准备好以上数据以后，打开 FiberArt 软件，先导入要铺放的曲面模型，如果模型不是网格模式，需要先双击模型节点，在它的属性界面中，转化为网格曲面；然后选中网格曲面节点，点击 `文件》导入》导入铺层`，在弹出的对话框中选择准备好的 json 格式的铺层文件，如果一切顺利，铺层就会导入到 FiberArt 中；接着可以进行仿真、后处理等操作。

## 总结

FiberArt 拥有很好的拓展性，能够很方便的用 python 语言创建新的插件功能。用户在准备 json 格式的铺层时，可能需要拥有一定的编程能力，对其他软件导出的路径做一些简单的格式处理。


*2025-06-26 18:53:56*